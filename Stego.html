<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steganography Analyzer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .drag-active {
      border-color: #3b82f6 !important;
      background-color: #f0f9ff !important;
    }
    .suspicious {
      background-color: #fee2e2 !important;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.5); }
      70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
      100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
    }
    #progress-bar {
      transition: width 0.3s ease;
    }
    .nav-link {
    padding: 0.5rem 0;
    border-bottom: 2px solid transparent;
    transition: color 0.2s, border-color 0.2s;
    }

    .nav-link:hover {
        color: #4A5568; 
        border-color: #CBD5E0;
    }

    .nav-link.active {
        border-color: #4299E1; 
        color: #8c8c8c;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <header class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold text-gray-900">Steganography Analyzer</h1>
      <p class="mt-1 text-sm text-gray-500">Detect hidden content in images</p>
        <div class="nav-links">
            <a href="Digital Forensic tool.html" class="nav-link active">Home</a>
            <a href="Stego.html" class="nav-link">Stego</a>
            <a href="about.html" class="nav-link">About</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </div>
    </div>
  </header>

  <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div id="upload-container" class="bg-white rounded-lg shadow-md p-8 border-2 border-dashed border-gray-300 transition-all duration-200">
      <div class="text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
        </svg>
        <h3 class="mt-2 text-lg font-medium text-gray-900">Drag and drop images here</h3>
        <p class="mt-1 text-sm text-gray-500">or click to browse files</p>
        <input id="file-input" type="file" accept="image/*" class="hidden" multiple>
        <button id="browse-btn" type="button" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
          Select Files
        </button>
      </div>
    </div>

    <div id="processing-section" class="mt-8 hidden">
      <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-medium text-gray-900">Processing Files</h3>
          <span id="file-count" class="text-sm text-gray-500">0/0 files processed</span>
        </div>

        <div class="mb-4">
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">Progress</span>
            <span id="progress-percent" class="text-sm font-medium text-gray-700">0%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
          </div>
        </div>

        <div id="results-container" class="space-y-4">
          <!-- Results will appear here -->
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-white border-t mt-8">
    <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500">
      Steganography detection system &copy; 2023
    </div>
  </footer>

  <script>
    // DOM Elements
    const uploadContainer = document.getElementById('upload-container');
    const fileInput = document.getElementById('file-input');
    const browseBtn = document.getElementById('browse-btn');
    const processingSection = document.getElementById('processing-section');
    const progressBar = document.getElementById('progress-bar');
    const progressPercent = document.getElementById('progress-percent');
    const fileCount = document.getElementById('file-count');
    const resultsContainer = document.getElementById('results-container');

    // Drag and drop functionality
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      uploadContainer.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    // Highlight drop area when item is dragged over it
    ['dragenter', 'dragover'].forEach(eventName => {
      uploadContainer.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      uploadContainer.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      uploadContainer.classList.add('drag-active');
    }

    function unhighlight() {
      uploadContainer.classList.remove('drag-active');
    }

    // Handle dropped files
    uploadContainer.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      handleFiles(files);
    }

    // Handle selected files via button
    browseBtn.addEventListener('click', () => {
      fileInput.click();
    });

    fileInput.addEventListener('change', () => {
      handleFiles(fileInput.files);
    });

    // Main processing function
    function handleFiles(files) {
      if (files.length === 0) return;

      // Reset UI
      resultsContainer.innerHTML = '';
      processingSection.classList.remove('hidden');
      processingSection.classList.remove('suspicious');
      
      // Process each file
      let processedCount = 0;
      const totalFiles = files.length;
      fileCount.textContent = `0/${totalFiles} files processed`;

      Array.from(files).forEach((file, index) => {
        processFile(file, index, totalFiles, () => {
          processedCount++;
          fileCount.textContent = `${processedCount}/${totalFiles} files processed`;
          const percent = Math.round((processedCount / totalFiles) * 100);
          progressBar.style.width = `${percent}%`;
          progressPercent.textContent = `${percent}%`;
        });
      });
    }

    // Simulate file processing (replace with actual backend call)
    function processFile(file, index, totalFiles, callback) {
      // Create result card immediately
      const resultCard = document.createElement('div');
      resultCard.className = 'bg-gray-50 p-4 rounded-md border border-gray-200';
      resultCard.innerHTML = `
        <div class="flex items-start">
          <div class="flex-shrink-0 h-10 w-10 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center">
            <img src="https://placehold.co/40" alt="File icon placeholder" class="h-full w-full object-cover">
          </div>
          <div class="ml-3 flex-1">
            <h4 class="text-sm font-medium text-gray-900">${file.name}</h4>
            <div class="mt-1 text-xs text-gray-500">Processing...</div>
            <div class="mt-2 w-full bg-gray-200 rounded-full h-1.5">
              <div class="bg-blue-600 h-1.5 rounded-full file-progress" style="width: 0%"></div>
            </div>
          </div>
        </div>
      `;
      resultsContainer.appendChild(resultCard);

      const progressElement = resultCard.querySelector('.file-progress');

      // Simulate processing with progress updates
      let progress = 0;
      const interval = setInterval(() => {
        progress += Math.random() * 10;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          simulateResult(file, resultCard, callback);
        }
        progressElement.style.width = `${progress}%`;
      }, 200);
    }

    // Simulate analysis results (replace with actual backend response)
    function simulateResult(file, resultCard, callback) {
      // Hide progress bar
      resultCard.querySelector('.file-progress').parentElement.style.display = 'none';

      // Randomly determine if the file is suspicious (30% chance)
      const isSuspicious = Math.random() < 0.3;
      
      // Get random file type
      const fileTypes = ['Text document', 'ZIP archive', 'PDF document', 'Executable', 'Image file'];
      const randomType = fileTypes[Math.floor(Math.random() * fileTypes.length)];
      
      // Set result content
      const statusClass = isSuspicious ? 'text-red-600' : 'text-green-600';
      const statusText = isSuspicious ? 'Suspicious content detected!' : 'No threats detected';
      
      const contentDiv = resultCard.querySelector('div.mt-1.text-xs');
      contentDiv.className = 'mt-1 text-xs ' + statusClass;
      contentDiv.innerHTML = `
        <div class="font-medium">${randomType} - ${statusText}</div>
        <div class="mt-1 ${isSuspicious ? 'text-red-500' : 'text-gray-500'}">${file.size.toLocaleString()} bytes</div>
      `;

      // If suspicious, mark the whole processing section
      if (isSuspicious) {
        processingSection.classList.add('suspicious');
      }

      // Notify that this file is done
      callback();
    }
  </script>
</body>
</html>
